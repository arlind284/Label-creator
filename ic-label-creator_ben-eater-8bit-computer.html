<!DOCTYPE html>
<html lang="en">

<!-- 
  (C) Klemens Ullmann-Marx / www.ull.at
  License: GPLv3
 -->

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>          
</head>

<body style="margin: 5px; padding: 0;">

<svg id="page" >
</svg>

<p style="font-family: sans-serif; font-size: 10px;">
  IC-Label Set "Ben Eater 8-Bit Breadboard Computer SAP-1"<br />
  https://github.com/klemens-u/ic-label-creator (C) 2020 by Klemens Ullmann-Marx / <a href="https:/www.ull.at">www.ull.at</a>
</p>

<script> 
  var globals = {
    gimmeColor      : true,
    pageWidth       : 210 - 20, // A4 height minus margin
    pageHeight      : 279.4 - 40, // ANSI letter height minus margin   
    pinDistance     : 2.54,
    // Starting position for first chip on page
    chipPositionX   : 0,
    chipPositionY   : 0,
    svgStrokeWidth  : .1,
    svgStrokeOffset : .1,
  };
  
  //Create Overline Symbols: https://fsymbols.com/generators/overline/
  var chips = {
      
    '74LS00' : {
      description : '4xNAND',
      type: 'gate',
      pins: {
        1 : 'A1',
        2 : 'B1',
        3 : 'Y1',
        4 : 'A2',
        5 : 'B2',
        6 : 'Y2',
        7 : '⏚',
        
        8 : 'Y3',
        9 : 'A3',
        10: 'B3',
        11: 'Y4',
        12: 'A4',
        13: 'B4',
        14: '+',
      },
    },
    
    '74LS02' : {
      description : '4xNOR',
      type: 'gate',
      pins: {
        1 : 'Y1',
        2 : 'A1',
        3 : 'B2',
        4 : 'Y2',
        5 : 'A2',
        6 : 'B2',
        7 : '⏚',
        
        8 : 'A3',
        9 : 'B3',
        10: 'Y3',
        11: 'A4',
        12: 'B4',
        13: 'Y4',
        14: '+',
      },
    },    
    
    '74LS04' : {
      description : '6xNOT',
      type: 'gate',
      pins: {
        1 : 'A1',
        2 : 'Y1',
        3 : 'A2',
        4 : 'Y2',
        5 : 'A3',
        6 : 'Y3',
        7 : '⏚',
        
        8 : 'Y4',
        9 : 'A4',
        10: 'Y5',
        11: 'A5',
        12: 'Y6',
        13: 'A6',
        14: '+',
      },
    },    
    
    '74LS08' : {
      description : '4xAND',
      type: 'gate',
      pins: {
        1 : 'A1',
        2 : 'B1',
        3 : 'Y1',
        4 : 'A2',
        5 : 'B2',
        6 : 'Y2',
        7 : '⏚',
        
        8 : 'Y3',
        9 : 'A3',
        10: 'B3',
        11: 'Y4',
        12: 'A4',
        13: 'B4',
        14: '+',
      },
    },    
    
    '74LS32' : {
      description : '4xOR',
      type: 'gate',
      pins: {
        1 : 'A1',
        2 : 'B1',
        3 : 'Y1',
        4 : 'A2',
        5 : 'B2',
        6 : 'Y2',
        7 : '⏚',
        
        8 : 'Y3',
        9 : 'A3',
        10: 'B3',
        11: 'Y4',
        12: 'A4',
        13: 'B4',
        14: '+',
      },
    },      
    
    '74LS86' : {
      description : '4xXOR',
      type: 'gate',
      pins: {
        1 : 'A1',
        2 : 'B1',
        3 : 'Y1',
        4 : 'A2',
        5 : 'B2',
        6 : 'Y2',
        7 : '⏚',
        
        8 : 'Y3',
        9 : 'A3',
        10: 'B3',
        11: 'Y4',
        12: 'A4',
        13: 'B4',
        14: '+',
      },
    },      
    
    '74LS107' : {
      description : '2xJK-FF',
      type: 'flipflop',
      pins: {
        1 : '1J',
        2 : '1Q̅',
        3 : '1Q',
        4 : '1K',
        5 : '2Q',
        6 : '2Q̅',
        7 : '⏚',
        
        8 : '2J',
        9 : '2CLK',
        10: '2C̅L̅R̅',
        11: '2K',
        12: '1CLK',
        13: '1C̅L̅R̅',
        14: '+',
      },
    },          
    
    '74LS138' : {
      description : '3to8 Decod',
      type: 'demux',
      pins: {
        1 : 'A',
        2 : 'B',
        3 : 'C',
        4 : 'G2A',
        5 : 'G2B',
        6 : 'G1',
        7 : 'Y7',
        8 : '⏚',
        
        9 : 'Y6',
        10: 'Y5',
        11: 'Y4',
        12: 'Y3',
        13: 'Y2',
        14: 'Y1',
        15: 'Y0',
        16: '+',
      },
    },
    
    '74LS139' : {
      description : '2x2to4 Dec',
      type: 'demux',
      pins: {
        1 : 'A',
        2 : 'B',
        3 : 'C',
        4 : 'G2A',
        5 : 'G2B',
        6 : 'G1',
        7 : 'Y7',
        8 : '⏚',
        
        9 : 'Y6',
        10: 'Y5',
        11: 'Y4',
        12: 'Y3',
        13: 'Y2',
        14: 'Y1',
        15: 'Y0',
        16: '+',
      },
    },    
    
    '74LS157' : {
      description : '4x2to1 MUX',
      type: 'mux',
      pins: {
        1 : 'S',
        2 : 'A1',
        3 : 'B1',
        4 : 'Y1',
        5 : 'A2',
        6 : 'B2',
        7 : 'Y2',
        8 : '⏚',
        
        9 : 'Y3',
        10: 'B3',
        11: 'A3',
        12: 'Y4',
        13: 'B4',
        14: 'A4',
        15: 'STRB',
        16: '+',
      },
    },       
    
    '74LS161' : {
      description : '4bit Count',
      type: 'counter',
      pins: {
        1 : 'CLR',
        2 : 'CLK',
        3 : 'A',
        4 : 'B',
        5 : 'C',
        6 : 'D',
        7 : 'ENP',
        8 : '⏚',
        
        9 : 'LD',
        10: 'ENT',
        11: 'QD',
        12: 'QC',
        13: 'QB',
        14: 'QA',
        15: 'CAR',
        16: '+',
      },
    },   
    
    '74LS173' : {
      description : '4bit Regist.',
      type: 'register',
      pins: {
        1 : 'M',
        2 : 'N',
        3 : '1Q',
        4 : '2Q',
        5 : '3Q',
        6 : '4Q',
        7 : 'CLK',
        8 : '⏚',
        
        9 : 'G1',
        10: 'G2',
        11: '1D',
        12: '1C',
        13: '1B',
        14: '1A',
        15: 'CLR',
        16: '+',
      },
    }, 
    
    '74189' : {
      description : '64bit RAM',
      type: 'ram',
      pins: {
        1 : 'A0',
        2 : 'ME',
        3 : 'WE',
        4 : 'D1',
        5 : 'S1',
        6 : 'D2',
        7 : 'S2',
        8 : '⏚',
        
        9 : 'S3',
        10: 'D3',
        11: 'S4',
        12: 'D4',
        13: 'A3',
        14: 'A2',
        15: 'A1',
        16: '+',
      }, 
    },
    
    '74LS245' : {
      description : '8bit Bus Transcv',
      type: 'bus-transceiver',
      pins: {
        1 : 'DIR',
        2 : 'A1',
        3 : 'A2',
        4 : 'A3',
        5 : 'A4',
        6 : 'A5',
        7 : 'A6',
        8 : 'A7',
        9 : 'A8',
        10: '⏚',
        
        11: 'B8',
        12: 'B7',
        13: 'B6',
        14: 'B5',
        15: 'B4',
        16: 'B3',
        17: 'B2',
        18: 'B1',
        19: 'E̅N̅',
        20: '+',
      },
    },    
    
    '74LS273' : {
      description : '8bit Register',
      type: 'register',
      pins: {
        1 : 'R̅S̅T̅',
        2 : 'Q0',
        3 : 'D0',
        4 : 'D1',
        5 : 'Q1',
        6 : 'Q2',
        7 : 'D2',
        8 : 'D3',
        9 : 'Q3',
        10: '⏚',
        
        11: 'CLK',
        12: 'Q4',
        13: 'D4',
        14: 'D5',
        15: 'Q5',
        16: 'Q6',
        17: 'D6',
        18: 'D7',
        19: 'Q7',
        20: '+',
      },
    },    
    
    '74LS283' : {
      description : '4bit Adder',
      type: 'adder',
      pins: {
        1 : '∑2',
        2 : 'B2',
        3 : 'A2',
        4 : '∑1',
        5 : 'A1',
        6 : 'B1',
        7 : 'CRI',
        8 : '⏚',
        9 : 'CRO',
        10: '∑4',
        11: 'B4',
        12: 'A4',
        13: '∑3',
        14: 'A3',
        15: 'B3',
        16: '+',
      }, 
    },    

    '28C16' : {
      description : '16Kbit EEPROM',
      type: 'eeprom',
      heigthPins: 6,
      pins: {
        1 : 'A7',
        2 : 'A6',
        3 : 'A5',
        4 : 'A4',
        5 : 'A3',
        6 : 'A2',
        7 : 'A1',
        8 : 'A0',
        9 : 'IO0',
        10: 'IO1',
        11: 'IO2',
        12: '⏚',
        
        13: 'IO3',
        14: 'IO4',
        15: 'IO5',
        16: 'IO6',
        17: 'IO7',
        18: 'C̅E̅',
        19: 'A10',
        20: 'O̅E̅',
        21: 'W̅E̅',
        22: 'A9',
        23: 'A8',
        24: '+',
      },
    },    
    
    // empty template
    ' ' : {
      description : '',
      type: '',
      heightPins: 3,
      pins: {
        1 : '',
        2 : '',
        3 : '',
        4 : '',
        5 : '',
        6 : '',
        7 : '',
        8 : '',
        9 : '',
        10: '',
        11: '',
        12: '',
        13: '',
        14: '',
        15: '',
        16: '',
        17: '',
        18: '',
        19: '',
        20: '',
        21: '',
        22: '',
        23: '',
        24: '',        
      },
    },
  
  };  
  
  $(document).ready(function() {
    
    // Set svg container to page size
    $('#page').attr({
      width: globals.pageWidth + 'mm',
      height: globals.pageHeight + 'mm',
    });
    
    // Draw chips
    drawChip('74LS00');
    drawChip('74LS00');
    
    drawChip('74LS02');
    
    drawChip('74LS04');
    drawChip('74LS04');
    drawChip('74LS04');
    drawChip('74LS04');
    drawChip('74LS04');
    
    drawChip('74LS08');
    drawChip('74LS08');
    drawChip('74LS08');
    
    drawChip('74LS32'); 
    
    drawChip('74LS86');
    drawChip('74LS86');
    
    drawChip('74LS107');
    
    drawChip('74LS138');
    
    drawChip('74LS139');
    
    drawChip('74LS157');    
    drawChip('74LS157');    
    drawChip('74LS157');    
    drawChip('74LS157');
    
    drawChip('74LS161');
    
    drawChip('74LS173');    
    drawChip('74LS173');    
    drawChip('74LS173');    
    drawChip('74LS173');    
    drawChip('74LS173');    
    drawChip('74LS173');    
    drawChip('74LS173');    
    drawChip('74LS173');
    
    drawChip('74189');
    drawChip('74189');
    
    drawChip('74LS245');    
    drawChip('74LS245');    
    drawChip('74LS245');    
    drawChip('74LS245');    
    drawChip('74LS245');    
    drawChip('74LS245');
    
    drawChip('74LS273');
    
    drawChip('74LS283');
    drawChip('74LS283');
    
    drawChip('28C16');
    drawChip('28C16');
    drawChip('28C16');
    
  });
  
  
  // === FUNCTIONS ===
  
  /**
    * Draw Chip by name
    */
  function drawChip(chipName) {
    
    console.log('=== ' + chipName);
    
    var chip = chips[chipName];
    var numPins = Object.keys(chip.pins).length;
    var chipWidth = numPins / 2 * globals.pinDistance + 1;
    var chipHeightPins = ('heigthPins' in chip) ? chip.heigthPins : 3;
    var chipHeight = chipHeightPins * globals.pinDistance;
    
    var $page = $('#page');
    
    // CREATE BASE SVG ELEMENT FOR CHIP
    // jQuery won't render svg elements without namespace url
    var svgChip = $(document.createElementNS("http://www.w3.org/2000/svg", 'svg')).attr({
      width: chipWidth + 'mm',
      height: chipHeight + 'mm',
      x: globals.chipPositionX + 'mm',
      y: globals.chipPositionY + 'mm',
    });
    
    // DRAW CHIP OUTLINE
    svgChip.append($(document.createElementNS("http://www.w3.org/2000/svg", 'rect')).attr({
      x : globals.svgStrokeOffset + 'mm',
      y : globals.svgStrokeOffset + 'mm',
      width: chipWidth - globals.svgStrokeOffset + 'mm',
      height: chipHeight - globals.svgStrokeOffset + 'mm',
      stroke: 'silver',
      'stroke-width': globals.svgStrokeWidth + 'mm',
      fill: 'white'
    }));
    
    // DRAW HALFCIRCLE MARKER
    svgChip.append($(document.createElementNS("http://www.w3.org/2000/svg", 'circle')).attr({
      cx : 0,
      cy : '50%',
      r  : '1.2mm',
      fill: 'grey'
    }));
    
    // DRAW CHIP MODEL + DESCRIPTION
    svgChip.append($(document.createElementNS("http://www.w3.org/2000/svg", 'text'))
      .html('&nbsp;&nbsp;' + chipName + ' ' + chip.description)
      .attr({
        x : '50%',
        y : chipHeight / 2 + .2  + 'mm',
        'dominant-baseline': 'middle',
        'text-anchor': 'middle',
        'font-family' : 'sans-serif',
        'font-size' : '1.6mm',
        'font-weight' : 'bold',
        fill: chipColor(chip.type),
      })
    );
    
    // DRAW PINS
    var x = globals.pinDistance / 2 + .5;
    jQuery.each(chip.pins, function (pinNum, pinName) {
      
      // bottom side
      if (pinNum <= numPins/2 ) {
        svgChip.append($(document.createElementNS("http://www.w3.org/2000/svg", 'text'))
          .html(pinName)
          .attr({
            x : 0,
            y : 0,    
            'dominant-baseline': 'baseline',
            'text-anchor': 'start',
            'font-family' : 'sans-serif',
            'font-size' : fontSize(pinName, chipHeightPins),
            style: 'transform: rotate(270deg) translate(-' +  (chipHeight - .2) + 'mm, ' + (x + .6) + 'mm);',
          })
        );          
        x += globals.pinDistance;
      
      // top side
      } else {
        x = x - globals.pinDistance;
        svgChip.append($(document.createElementNS("http://www.w3.org/2000/svg", 'text'))
          .html(pinName)
          .attr({
            x : 0,
            y : 0,              
            'dominant-baseline': 'baseline',
            'text-anchor': 'end',
            'font-family' : 'sans-serif',
            'font-size' : fontSize(pinName, chipHeightPins),
            style: 'transform: rotate(270deg) translate(-.3mm, ' + (x + .7) + 'mm);',
         })
       );
      }
      
    }); // end of for each pin
    
    // DRAW CURRENT CHIP TO page
    $('#page').append(svgChip);
    
    // UPDATE POSITION FOR NEXT CHIP
    globals.chipPositionY += chipHeight + 4;
    
    // Begin new column
    if (globals.chipPositionY + 10 > globals.pageHeight) {
      globals.chipPositionY = 0;
      globals.chipPositionX += 50;
    }
  }
  
  
  /**
    * Calculate font size according to pinName string length
    */ 
  function fontSize(pinName, chipHeightPins) {
    
    // We don't need font scaling for larger chips
    if (chipHeightPins > 3) {
      return '1.6mm';
    }
    
    // Do some handstands for multibyte chars
    var length = countPinNameChars(pinName);
    
    if (length <=2) {
      return '1.6mm';
    }
    
    if (length <=3) {
      return '1.4mm';
    }
    
    return '1.1mm';
  }
  
  
  /**
    * Count string length without overline multibytes 
    */
  function countPinNameChars(pinName) {
    // Escape multibyte chars (and others)
    var uriEncoded = encodeURIComponent(pinName)
    // Remove overline multibyte chars
    var overlineReplaced = uriEncoded.split('%CC%85').join('');
    // Re-decode for other encoded chars like "+", "⏚"
    var uriDecoded = decodeURIComponent(overlineReplaced);
    
    return uriDecoded.length;
  }
  
  
  /**
   * Color chip titel 
   */
  function chipColor(type) {
    
    if (globals.gimmeColor == false) {
      return 'black';
    }
    
    if (['ram', 'eeprom', 'register', 'flipflop'].includes(type)) {
      return 'red';
    }
    
    if (['gate'].includes(type)) {
      return 'blue';
    }
    
    if (['mux', 'demux'].includes(type)) {
      return 'green';
    }    
    
    return 'black';
  }
  
  
 

</script> 

</body>
</html>